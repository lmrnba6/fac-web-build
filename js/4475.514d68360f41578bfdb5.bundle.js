"use strict";(self.webpackChunkfac=self.webpackChunkfac||[]).push([[4475],{84475:function(e,n,s){s.r(n),s.d(n,{default:function(){return De}}),s(61360);var t=s(4942),i=s(15861),r=s(70885),a=s(87757),l=s.n(a),c=s(67294),d=s(5513),o=s(17354),u=s(83823),x=s(65497),m=s(42365),h=s(98227),j=s(79366),f=s(12590),p=s(55654),g=s(30833),Z=s(16724),v=s(30381),b=s.n(v),N=s(56176),y=s(14322),S=s(85893),C=function(e,n,s,t,i){return[{name:i.formatMessage({id:"number"}),maxWidth:"150px",selector:"number",sortable:!1,cell:function(e){return(0,S.jsx)(d.rU,{to:"#",onClick:function(){return s(e)},className:"user-name text-truncate mb-0",children:(0,S.jsx)("span",{className:"font-weight-bold text-capitalize",children:"#".concat(e.number)})})}},{name:i.formatMessage({id:"beneficiary"}),selector:"beneficiary",sortable:!1,cell:function(e){return e.beneficiary}},{name:i.formatMessage({id:"date"}),selector:"date",sortable:!1,cell:function(e){return b()(e.date).format("DD-MM-YYYY")}},{name:i.formatMessage({id:"docs"}),selector:"invoices",maxWidth:"100px",sortable:!1,cell:function(e){return(0,S.jsx)("div",{className:"position-relative",children:(0,S.jsx)(o.Z,{pill:!0,color:Number(e.invoices)?"light-primary":"light-dark",className:"badge-up",children:e.invoices})})}},{name:i.formatMessage({id:"products"}),selector:"products",maxWidth:"100px",sortable:!1,cell:function(e){return(0,S.jsx)("div",{className:"position-relative",children:(0,S.jsx)(o.Z,{pill:!0,color:Number(e.products)?"light-primary":"light-dark",className:"badge-up",children:e.products})})}},{name:i.formatMessage({id:"responsible"}),selector:"responsible",sortable:!0,cell:function(e){return e.responsibleName}},{name:i.formatMessage({id:"actions"}),minWidth:"100px",cell:function(r){return(0,S.jsxs)(u.Z,{children:[(0,S.jsx)(x.Z,{tag:"div",className:"btn btn-sm",children:(0,S.jsx)(j.Z,{size:14,className:"cursor-pointer"})}),(0,S.jsxs)(m.Z,{right:!0,children:[t.can(N.a.SEE_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsxs)(h.Z,{tag:d.rU,to:"#",onClick:function(){return s(r)},className:"w-100",children:[(0,S.jsx)(f.Z,{size:14,className:"mr-50"}),(0,S.jsx)("span",{className:"align-middle",children:i.formatMessage({id:"details"})})]}),t.can(N.a.EDIT_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsxs)(h.Z,{tag:d.rU,to:"#",onClick:function(){return n(r)},className:"w-100",children:[(0,S.jsx)(p.Z,{size:14,className:"mr-50"}),(0,S.jsx)("span",{className:"align-middle",children:i.formatMessage({id:"edit"})})]}),t.can(N.a.DELETE_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsxs)(h.Z,{className:"w-100",onClick:function(){return e(r.id)},children:[(0,S.jsx)(g.Z,{size:14,className:"mr-50"}),(0,S.jsx)("span",{className:"align-middle",children:i.formatMessage({id:"delete"})})]})]})]})}}]},k=s(84751),w=s(61896),M=s(70616),z=s(73752),E=s(91140),D=s(27434),A=s(90044),T=s(10267),O=s(51252),_=s(67954),P=s(68959),q=s(97975),I=s(56941),Y=s(38089),U=s(75351),L=s(91121),W=(s(22299),s(73732),s(88295)),B=s(39249),F=s(16714),R=s(44012),J=s(86896),H=s(48159),K=s(4248),Q=s(16550),G=s(6756),V=s(85677),X=s(32701),$=s(10684),ee=s(77243),ne=s(53999),se=s(98008),te=s(9393),ie=s(18829),re=s(34726),ae=s(36595),le=s(97985),ce=s(68138),de=s(73973),oe=s(36694),ue=s(39397),xe=s(7708),me=(s(94470),s(14130),function(e){var n=e.dispatch,s=e.openDetails,t=e.toggleDetails,i=e.sale,a=(e.setSale,e.toggleSidebar),l=e.refresh,d=e.onClosed,u=(0,J.Z)(),x=(0,c.useState)(!1),m=(0,r.Z)(x,2),h=(m[0],m[1]),j=(0,c.useState)(!1),f=(0,r.Z)(j,2),p=(f[0],f[1]),g=(0,c.useContext)(G.v),v=(0,c.useState)(0),C=(0,r.Z)(v,2),k=(C[0],C[1]),w=(0,c.useState)([]),D=(0,r.Z)(w,2),A=D[0],T=D[1],O=(0,c.useState)([]),_=(0,r.Z)(O,2),P=_[0],I=_[1],Y=(0,c.useState)({}),U=(0,r.Z)(Y,2),L=U[0],H=U[1],K=(0,c.useState)(!1),me=(0,r.Z)(K,2),he=me[0],je=me[1],fe=(0,c.useState)("1"),pe=(0,r.Z)(fe,2),ge=pe[0],Ze=pe[1],ve=function(e){ge!==e&&Ze(e)},be=function(){je(!1),t(),l()},Ne=function(e){var n=(e.invoices||[]).reduce((function(e,n){return e+Number(n.size)}),0)/1024;k(n.toFixed(2)),T(e.invoices||[]),I(e.products||[]),H(e)};return(0,c.useEffect)((function(){b().locale("ar"===u.locale?"ar-dz":u.locale),s&&i.id&&(0,Q.k_)(Q.U2,[W.vA,i.id],!0,B.Am,n,"","somethingWrong",Ne,null)}),[s]),i?(0,S.jsxs)(V.Z,{scrollable:!0,className:"modal-lg",isOpen:s,toggle:t,onClosed:function(){h(!1),p(!1),Ze("1"),he||d()},children:[(0,S.jsxs)(X.Z,{toggle:t,children:["#",L.number]}),(0,S.jsxs)($.Z,{children:[(0,S.jsxs)(ee.Z,{justified:!0,tabs:!0,children:[(0,S.jsx)(ne.Z,{children:(0,S.jsxs)(se.Z,{active:"1"===ge,onClick:function(){ve("1")},children:[(0,S.jsx)(de.Z,{size:14}),(0,S.jsx)(R.Z,{id:"details"})]})}),(0,S.jsx)(ne.Z,{children:(0,S.jsxs)(se.Z,{active:"2"===ge,onClick:function(){ve("2")},children:[(0,S.jsx)(M.Z,{size:14}),(0,S.jsx)(R.Z,{id:"description"})]})}),(0,S.jsx)(ne.Z,{children:(0,S.jsxs)(se.Z,{active:"3"===ge,onClick:function(){ve("3")},children:[(0,S.jsx)(oe.Z,{size:14}),(0,S.jsx)(R.Z,{id:"docs"})," (",A?A.length:0,")"]})}),(0,S.jsx)(ne.Z,{children:(0,S.jsxs)(se.Z,{active:"4"===ge,onClick:function(){ve("4")},children:[(0,S.jsx)(ue.Z,{size:14}),(0,S.jsx)(R.Z,{id:"products"})," (",P?P.length:0,")"]})})]}),(0,S.jsxs)(te.Z,{className:"py-50",activeTab:ge,children:[(0,S.jsx)(ie.Z,{tabId:"1",children:(0,S.jsxs)("div",{className:"card-transaction",children:[(0,S.jsxs)("div",{className:"transaction-item",children:[(0,S.jsxs)(re.Z,{className:"d-flex align-items-center",children:[(0,S.jsx)(ce.Z,{className:"rounded",color:"light-primary",icon:(0,S.jsx)(z.Z,{size:18})}),(0,S.jsx)(re.Z,{body:!0,children:(0,S.jsxs)("h6",{className:"transaction-title",children:[(0,S.jsx)(R.Z,{id:"beneficiary"}),":"]})})]}),(0,S.jsx)("div",{className:"font-weight-bolder  ml-1",children:L.beneficiary})]}),(0,S.jsxs)("div",{className:"transaction-item",children:[(0,S.jsxs)(re.Z,{className:"d-flex align-items-center",children:[(0,S.jsx)(ce.Z,{className:"rounded",color:"light-primary",icon:(0,S.jsx)(E.Z,{size:18})}),(0,S.jsx)(re.Z,{body:!0,children:(0,S.jsxs)("h6",{className:"transaction-title",children:[(0,S.jsx)(R.Z,{id:"date"}),":"]})})]}),(0,S.jsx)("div",{className:"font-weight-bolder  ml-1",children:b()(L.date).format("dddd D MMMM  YYYY")})]}),P?(0,S.jsxs)("div",{className:"transaction-item",children:[(0,S.jsxs)(re.Z,{className:"d-flex align-items-center",children:[(0,S.jsx)(ce.Z,{color:"light-primary",className:"rounded",icon:(0,S.jsx)(ue.Z,{size:18})}),(0,S.jsx)(re.Z,{body:!0,children:(0,S.jsxs)("h6",{className:"transaction-title",children:[(0,S.jsx)(R.Z,{id:"products"}),":"]})})]}),(0,S.jsx)("div",{className:"font-weight-bolder text-right ml-1",children:(0,S.jsxs)("div",{className:"font-weight-bolder text-right",id:"invoices",children:[P.length," ",(0,S.jsx)(R.Z,{id:"products"})]})})]}):null,A?(0,S.jsxs)("div",{className:"transaction-item",children:[(0,S.jsxs)(re.Z,{className:"d-flex align-items-center",children:[(0,S.jsx)(ce.Z,{color:"light-primary",className:"rounded",icon:(0,S.jsx)(oe.Z,{size:18})}),(0,S.jsx)(re.Z,{body:!0,children:(0,S.jsxs)("h6",{className:"transaction-title",children:[(0,S.jsx)(R.Z,{id:"docs"}),":"]})})]}),(0,S.jsx)("div",{className:"font-weight-bolder text-right  ml-1",children:(0,S.jsxs)("div",{className:"font-weight-bolder text-right",id:"invoices",children:[A.length," ",(0,S.jsx)(R.Z,{id:"docs"})]})})]}):null]})}),(0,S.jsx)(ie.Z,{tabId:"2",children:L.description?(0,S.jsx)("div",{children:L.description}):(0,S.jsx)("h4",{className:"text-center text-muted my-1",children:(0,S.jsx)(R.Z,{id:"noDescription"})})}),(0,S.jsx)(ie.Z,{tabId:"3",children:A&&A.length?(0,S.jsxs)(ae.Z,{striped:!0,children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"#"}),(0,S.jsx)("th",{children:u.formatMessage({id:"name"})}),(0,S.jsx)("th",{children:u.formatMessage({id:"size"})}),(0,S.jsx)("th",{children:u.formatMessage({id:"actions"})})]})}),(0,S.jsx)("tbody",{children:(A||[]).map((function(e,s){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:s+1}),(0,S.jsx)("td",{children:(0,S.jsx)("span",{className:"text-dark",children:e.name})}),(0,S.jsx)("td",{children:(0,S.jsxs)(o.Z,{color:"light-info",children:[(0,S.jsx)("span",{className:"text-dark",children:"".concat((e.size/1024).toFixed(2))}),(0,S.jsx)("span",{className:"text-dark ml-50",children:(0,J.Z)().formatMessage({id:"ko"})})]})}),(0,S.jsx)("td",{children:(0,S.jsx)(xe.Z,{size:16,className:"text-success cursor-pointer",onClick:function(s){s.preventDefault(),(0,Z.Sv)(e,n)}})})]},s)}))})]}):(0,S.jsxs)("h4",{className:"text-center text-muted my-1",children:[A&&A.length||0," ",(0,S.jsx)(R.Z,{id:"docs"})]})}),(0,S.jsx)(ie.Z,{tabId:"4",children:P&&P.length?(0,S.jsxs)(ae.Z,{striped:!0,children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"#"}),(0,S.jsx)("th",{children:u.formatMessage({id:"name"})}),(0,S.jsx)("th",{children:u.formatMessage({id:"quantity"})})]})}),(0,S.jsx)("tbody",{children:P.map((function(e,n){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:n+1}),(0,S.jsx)("td",{children:e.name}),(0,S.jsx)("td",{children:(0,S.jsx)(o.Z,{color:"light-info",children:e.quantity})})]},n)}))})]}):(0,S.jsxs)("h4",{className:"text-center text-muted my-1",children:[P&&P.length||0," ",(0,S.jsx)(R.Z,{id:"products"})]})})]})]}),(g.can(N.a.DELETE_ACTION,y.k.SALE_SUBJECT)||g.can(N.a.EDIT_ACTION,y.k.SALE_SUBJECT))&&(0,S.jsxs)(le.Z,{children:[g.can(N.a.DELETE_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsx)(q.Z,{color:"danger",onClick:function(){(0,F.o)(u.formatMessage({id:"delete"}),u.formatMessage({id:"deleteSaleQuestion"}),"warning",!0,u.formatMessage({id:"yes"}),u.formatMessage({id:"no"})).then((function(e){e.value&&(0,Q.k_)(Q.Od,[W.vA,i.id],!0,B.Am,n,"saleDeletedSuccessfully","somethingWrong",be,null)}))},outline:!0,children:(0,S.jsx)(R.Z,{id:"delete"})}),g.can(N.a.EDIT_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsx)(q.Z,{color:"primary",onClick:function(){je(!0),t(),a()},children:(0,S.jsx)(R.Z,{id:"edit"})})]})]}):null}),he=s(82433),je=(s(99726),s(82475)),fe=s(42982),pe=s(61643),ge=s(78268),Ze=s(13777),ve=s(32655),be=s(60357),Ne=s(17834),ye=s(15538),Se=s(82669),Ce=s(79976),ke=function(e){var n=e.open,s=e.toggleSidebar,t=e.refresh,i=e.sale,a=e.onClosed,l=e.dispatch,d=(0,c.useState)(!1),u=(0,r.Z)(d,2),x=u[0],m=u[1],h=(0,c.useState)(null),j=(0,r.Z)(h,2),f=j[0],p=j[1],g=(0,c.useState)([]),v=(0,r.Z)(g,2),N=v[0],y=v[1],C=(0,c.useState)(0),k=(0,r.Z)(C,2),D=k[0],A=k[1],T=(0,c.useState)([]),O=(0,r.Z)(T,2),P=O[0],I=O[1],Y=(0,c.useState)(new Date),U=(0,r.Z)(Y,2),L=U[0],F=U[1],K=(0,c.useState)(""),G=(0,r.Z)(K,2),ee=G[0],ne=G[1],se=(0,c.useState)(""),te=(0,r.Z)(se,2),ie=te[0],re=te[1],ce=(0,c.useState)(0),de=(0,r.Z)(ce,2),me=de[0],he=de[1],je=(0,c.useState)(null),ke=(0,r.Z)(je,2),we=ke[0],Me=ke[1],ze=(0,c.useState)(null),Ee=(0,r.Z)(ze,2),De=Ee[0],Ae=Ee[1],Te=(0,c.useState)([]),Oe=(0,r.Z)(Te,2),_e=Oe[0],Pe=Oe[1],qe=(0,c.useState)([]),Ie=(0,r.Z)(qe,2),Ye=Ie[0],Ue=Ie[1],Le=(0,c.useState)(null),We=(0,r.Z)(Le,2),Be=We[0],Fe=We[1],Re=(0,c.useState)(!1),Je=(0,r.Z)(Re,2),He=Je[0],Ke=Je[1],Qe=(0,c.useRef)(),Ge=(0,J.Z)(),Ve=function(e){F(e.date),Pe(e.products),Ue(e.products),ne(e.description),re(e.beneficiary);var n=(e.invoices||[]).reduce((function(e,n){return e+Number(n.size)}),0)/1024;A(n.toFixed(2)),I(e.invoices||[]),e.products&&Pe(e.products.map((function(e){return{product:e.id,name:e.name,quantity:e.quantity}})))};(0,c.useEffect)((function(){var e=we&&N.find((function(e){return e.value===we.value})),n=we&&Ye&&Ye.find((function(e){return e.id===we.value})),s=i.id?e?Number(e.quantity)+Number(n?n.quantity:0):0:n?Number(n.quantity):e?Number(e.quantity):0;Fe(s)}),[we]),(0,c.useEffect)((function(){n&&(i.id&&(0,Q.k_)(Q.U2,[W.vA,i.id],!0,B.Am,l,"","somethingWrong",Ve,s),(0,Q.k_)(Q.Ki,[W.y3,0,Number.MAX_SAFE_INTEGER,[["name","asc"]],{}],!0,B.Am,l,"","somethingWrong",(function(e){return function(e){y(e.map((function(e){return{value:e.id,label:e.name,quantity:e.quantity,description:e.description,beneficiary:e.beneficiary,category:e.category}})))}(e)}),null))}),[n]);var Xe=!L||!ie,$e=function(){s(),t()},en=function(e){420===e.code?p("quantityError"):p("somethingWrong")},nn=function(){return(0,S.jsx)("div",{children:f&&(0,S.jsxs)(Ne.Z,{color:"danger",className:"d-flex align-items-center",children:[(0,S.jsx)("div",{className:"alert-body font-small-2 flex-grow-1",children:(0,S.jsx)("p",{children:(0,S.jsx)("small",{className:"mr-50",children:(0,S.jsx)(R.Z,{id:f})})})}),(0,S.jsx)(pe.Z,{id:"login-tip",className:"mx-50",size:18,style:{top:"10px",right:"10px"}})]})})};return(0,S.jsxs)(V.Z,{isOpen:n,toggle:s,className:"sidebar-lg",contentClassName:"p-0",onClosed:function(){m(!1),p(""),Me(null),y([]),Ue([]),Pe([]),a(),A(0),I([]),he(0),F(new Date),ne(""),re("")},modalClassName:"modal-slide-in transaction-sidebar",children:[(0,S.jsx)(X.Z,{className:"mb-1",toggle:s,close:(0,S.jsx)(ge.Z,{className:"cursor-pointer",size:15,onClick:s}),tag:"div",children:(0,S.jsx)("h5",{className:"modal-title",children:(0,S.jsx)(R.Z,{id:"".concat(i.id?"edit":"add","Sale")})})}),(0,S.jsx)($.Z,{className:"flex-grow-1 pb-sm-0 pb-3",children:(0,S.jsxs)(ye.Z,{onSubmit:i.id?function(e){e.preventDefault(),m(!0),p(!1),Xe||(0,Q.k_)(Q.Vx,[W.vA,i.id,{date:b()(L).format("YYYY-MM-DD"),products:_e,product:we?we.value:null,description:ee,beneficiary:ie,files:P}],!0,B.Am,l,"saleUpdatedSuccessfully","",$e,en)}:function(e){e.preventDefault(),m(!0),p(!1),Xe||(0,Q.k_)(Q.$T,[W.vA,{date:b()(L).format("YYYY-MM-DD"),products:_e,product:we?we.value:null,description:ee,beneficiary:ie,files:P}],!0,B.Am,l,"saleCreatedSuccessfully","",$e,en)},children:[nn(),(0,S.jsx)("div",{className:"divider",children:(0,S.jsx)("div",{className:"divider-text",children:(0,S.jsx)("div",{className:"full-width d-flex align-items-center justify-content-center my-1",children:(0,S.jsxs)(q.Z.Ripple,{className:"round center mr-50",color:"primary",onClick:function(){return Ae(!0)},children:[(0,S.jsx)(ue.Z,{size:14}),(0,S.jsx)("span",{className:"align-middle mx-25",children:Ge.formatMessage({id:"addProduct"})}),(0,S.jsx)(w.Z,{size:14})]})})})}),_e&&_e.length?(0,S.jsx)("div",{className:"d-flex flex-column mb-2",children:(0,S.jsxs)(ae.Z,{size:"sm",striped:!0,children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"#"}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"name"})}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"quantity"})}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"actions"})})]})}),(0,S.jsx)("tbody",{children:_e.map((function(e,n){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:n+1}),(0,S.jsx)("td",{children:e.name}),(0,S.jsx)("td",{children:(0,S.jsx)(o.Z,{color:"light-info",children:e.quantity})}),(0,S.jsx)("td",{children:(0,S.jsxs)("div",{children:[(0,S.jsx)(Ze.Z,{size:16,className:"text-danger cursor-pointer ml-50",onClick:function(){return function(e){Pe(_e.filter((function(n){return n.product!==e.product})))}(e)}}),(0,S.jsx)(ve.Z,{size:16,className:"text-warning cursor-pointer ml-50",onClick:function(){return function(e){Ke(!0);var n=_e.find((function(n){return n.product===e.product}));Me({value:e.product,quantity:e.quantity,label:e.name}),n&&(he(n.quantity),Ae(!0))}(e)}})]})})]},n)}))})]})}):null,(0,S.jsx)(H.Z,{label:(0,S.jsx)(R.Z,{id:"beneficiary"}),value:ie,id:"beneficiary",name:"beneficiary",placeholder:"",requireStar:!0,invalid:x&&!ie,invalidtext:(0,S.jsx)(R.Z,{id:"required"}),onChange:function(e){return re(e.target.value)},prepend:{icon:(0,S.jsx)(z.Z,{size:14})}}),(0,S.jsx)(H.Z,{label:(0,S.jsx)(R.Z,{id:"date"}),required:!0,id:"date",name:"date",className:"form-control",onChange:function(e){return F(e[0])},value:L,requireStar:!0,invalid:x&&!L,invalidtext:(0,S.jsx)(R.Z,{id:"required"}),prepend:{icon:(0,S.jsx)(E.Z,{size:14})},type:"flatPicker"}),(0,S.jsx)(H.Z,{label:(0,S.jsx)(R.Z,{id:"description"}),value:ee,id:"description",name:"description",placeholder:"",type:"textarea",rows:"3",onChange:function(e){return ne(e.target.value)},prepend:{icon:(0,S.jsx)(M.Z,{size:14})}}),(0,S.jsx)("div",{className:"divider",children:(0,S.jsx)("div",{className:"divider-text",children:(0,S.jsxs)("div",{className:"full-width d-flex align-items-center justify-content-center my-1",children:[(0,S.jsxs)(q.Z.Ripple,{className:"round center mr-50",color:"dark",onClick:function(){return Qe.current&&Qe.current.click()},children:[(0,S.jsx)(oe.Z,{size:14}),(0,S.jsx)("span",{className:"align-middle mx-25",children:Ge.formatMessage({id:"addDocument"})}),(0,S.jsx)(w.Z,{size:14}),(0,S.jsx)("input",{type:"file",multiple:!0,onChange:function(e){(0,Z.IL)(e,B.Am,l).then((function(e){A(e.size),I([].concat((0,fe.Z)(P),(0,fe.Z)(e.files)))}))},onClick:function(e){e.target.value=null},name:"attach-email-item",id:"attach-email-item",ref:Qe,hidden:!0})]}),D>0?(0,S.jsxs)("h6",{className:"mx-1 left",children:[D," ",(0,S.jsx)(R.Z,{id:"ko"})]}):null]})})}),P&&P.length?(0,S.jsx)("div",{className:"d-flex flex-column mb-2",children:(0,S.jsxs)(ae.Z,{size:"sm",striped:!0,children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"#"}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"name"})}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"size"})}),(0,S.jsx)("th",{children:Ge.formatMessage({id:"actions"})})]})}),(0,S.jsx)("tbody",{children:(P||[]).map((function(e,n){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:n+1}),(0,S.jsx)("td",{children:(0,S.jsx)("span",{className:"text-dark",children:e.name})}),(0,S.jsx)("td",{children:(0,S.jsxs)(o.Z,{color:"light-info",children:[(0,S.jsx)("span",{className:"text-dark",children:"".concat((e.size/1024).toFixed(2))}),(0,S.jsx)("span",{className:"text-dark ml-50",children:Ge.formatMessage({id:"ko"})})]})}),(0,S.jsxs)("td",{children:[(0,S.jsx)(Ze.Z,{size:16,className:"text-danger cursor-pointer",onClick:function(){return function(e){var n=P.filter((function(n){return n.id!==e.id})),s=n.reduce((function(e,n){return e+n.size}),0)/1024;I(n),A(s.toFixed(2))}(e)}}),(0,S.jsx)(xe.Z,{size:16,className:"text-success cursor-pointer ml-50",onClick:function(n){n.preventDefault(),(0,Z.Sv)(e,l)}})]})]},n)}))})]})}):null,nn(),(0,S.jsx)(Se.Z,{className:"d-flex align-items-center",children:(0,S.jsx)(c.Fragment,{children:(0,S.jsx)(q.Z.Ripple,{type:"submit",color:"primary",children:(0,S.jsx)(R.Z,{id:"save"})})})})]})}),(0,S.jsxs)(V.Z,{isOpen:De,toggle:function(){return Ae(!De)},onClosed:function(){he(0),Me(null),Ke(!1)},className:"modal-dialog-centered",children:[(0,S.jsx)(X.Z,{toggle:function(){return Ae(!De)},children:(0,S.jsx)(R.Z,{id:He?"editProduct":"addProduct"})}),(0,S.jsxs)($.Z,{children:[(0,S.jsx)(Ce.Z,{disabled:He,add:!0,refresh:n,inv:we,dispatch:l,onChange:function(e){return function(e){if(he(0),Me(null),setTimeout((function(){return Me(e)})),e&&e.value){var n=_e.find((function(n){return n.product===e.value}));n&&he(n.quantity)}}(e)}}),we?(0,S.jsxs)("div",{children:[(0,S.jsx)(_.Z,{for:"rows-per-page",children:(0,S.jsx)(R.Z,{id:"quantity"})}),(0,S.jsx)(H.Z,{prepend:{icon:(0,S.jsx)(be.Z,{size:14})},disabled:!we,min:0,max:Be,type:"number",step:"1",value:me,onChange:function(e){return he(Number(e.target.value))}})]}):null]}),(0,S.jsx)(le.Z,{children:(0,S.jsx)(q.Z.Ripple,{onClick:function(){var e=_e.find((function(e){return e.product===we.value}));e?e.quantity=me:_e.push({product:we.value,name:we.label,quantity:me}),Ae(!1),he(0),Me(null)},color:"primary",disabled:Number(me)<=0||Number(me)>Number(Be),children:(0,S.jsx)(R.Z,{id:" ok"})})})]})]})};function we(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function Me(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?we(Object(s),!0).forEach((function(n){(0,t.Z)(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):we(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}var ze=function(e){var n=e.onAdd,s=e.handlePerPage,t=e.rowsPerPage,i=e.pageIndex,r=e.data,a=e.intl,l=e.ability;return(0,S.jsx)("div",{className:"list-table-header w-100 mr-1 ml-50 mt-2 mb-75",children:(0,S.jsxs)(T.Z,{children:[(0,S.jsx)(O.Z,{xl:"6",className:"d-flex align-items-center p-0",children:(0,S.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,S.jsx)(_.Z,{for:"rows-per-page",children:(0,S.jsx)(R.Z,{id:"rowsPerPage"})}),(0,S.jsx)(P.Z,{className:"form-control mx-50",type:"select",value:t,onChange:s,style:{width:"4rem",padding:"0 0.8rem",backgroundPosition:"calc(100% - 3px) 7px, calc(100% - 20px) 13px, 100% 0"},bsSize:"sm",children:he.m.map((function(e,n){return(0,S.jsx)("option",{value:e,children:e},n)}))}),(0,S.jsxs)(_.Z,{for:"rows-per-page",children:[r.count?(0,S.jsxs)(S.Fragment,{children:[(i-1)*t+1,"-",i*t>r.count?r.count:i*t," ",a.formatMessage({id:"of"})," ",r.count]}):null," "]})]})}),(0,S.jsxs)(O.Z,{xl:"6",className:"d-flex align-items-sm-center justify-content-lg-end justify-content-start flex-lg-nowrap flex-wrap flex-sm-row flex-column pr-lg-1 p-0 mt-lg-0 mt-1",children:[(0,S.jsx)("div",{className:"mr-1",children:(0,S.jsx)(je._,{data:r,title:"spent",keys:["number","date"]})}),l.can(N.a.WRITE_ACTION,y.k.SALE_SUBJECT)&&(0,S.jsxs)(q.Z.Ripple,{color:"primary",onClick:n,children:[(0,S.jsx)(w.Z,{size:15}),(0,S.jsx)("span",{className:"align-middle ml-25",children:(0,S.jsx)(R.Z,{id:"addSale"})})]})]})]})})},Ee=function(){var e=(0,c.useState)(he.m[0]),n=(0,r.Z)(e,2),s=n[0],t=n[1],a=(0,c.useState)(1),d=(0,r.Z)(a,2),o=d[0],u=d[1],x=(0,c.useState)([["createdAt","DESC"]]),m=(0,r.Z)(x,2),h=m[0],j=m[1],f=(0,c.useState)({count:0,rows:[]}),p=(0,r.Z)(f,2),g=p[0],Z=p[1],v=(0,c.useState)({}),N=(0,r.Z)(v,2),y=N[0],w=N[1],_=(0,c.useState)({}),P=(0,r.Z)(_,2),q=P[0],V=P[1],X=(0,k.I0)(),$=(0,c.useState)(""),ee=(0,r.Z)($,2),ne=ee[0],se=ee[1],te=(0,c.useState)(""),ie=(0,r.Z)(te,2),re=ie[0],ae=ie[1],le=(0,c.useState)(""),ce=(0,r.Z)(le,2),de=(ce[0],ce[1],(0,c.useState)("")),oe=(0,r.Z)(de,2),ue=(oe[0],oe[1],(0,c.useState)(null)),xe=(0,r.Z)(ue,2),je=xe[0],fe=xe[1],pe=(0,c.useState)(null),ge=(0,r.Z)(pe,2),Ze=ge[0],ve=ge[1],be=(0,c.useState)(""),Ne=(0,r.Z)(be,2),ye=(Ne[0],Ne[1],(0,c.useState)(!1)),Se=(0,r.Z)(ye,2),Ce=Se[0],we=Se[1],Ee=(0,c.useState)(!1),De=(0,r.Z)(Ee,2),Ae=De[0],Te=De[1],Oe=(0,c.useState)(0),_e=(0,r.Z)(Oe,2),Pe=_e[0],qe=_e[1],Ie=(0,J.Z)(),Ye=(0,c.useContext)(G.v),Ue=function(e){Z({rows:e||[],count:e.length?e[0].count:0})},Le=function(e,n,s,t){(0,Q.k_)(Q.Ki,[W.gA,e,n,s,t],!0,B.Am,X,null,"somethingWrong",Ue,null)};(0,c.useEffect)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Le(o,s,h,y);case 1:case"end":return e.stop()}}),e)}))),[]);var We,Be,Fe,Re,Je,He=function(){return we(!Ce)},Ke=function(){return Te(!Ae)},Qe=function(e){u(e.selected+1),Le(e.selected+1,s,h,y)},Ge=function(e){u(1),se(e),w(Me(Me({},y),{},{search:e})),clearTimeout(Pe),qe(setTimeout((function(){return Le(1,s,h,Me(Me({},y),{},{search:e}))}),700))},Ve=function(){return V({})};return(0,S.jsx)("div",{className:"app-expense-list",children:(0,S.jsxs)(c.Fragment,{children:[(0,S.jsxs)(I.Z,{children:[(0,S.jsx)(Y.Z,{children:(0,S.jsx)(U.Z,{tag:"h4",children:(0,S.jsx)(R.Z,{id:"searchFilter"})})}),(0,S.jsx)(L.Z,{children:(0,S.jsxs)(T.Z,{children:[(0,S.jsx)(O.Z,{md:"4",children:(0,S.jsx)(H.Z,{prepend:{icon:(0,S.jsx)(M.Z,{size:14})},placeholder:Ie.formatMessage({id:"searchByDescription"}),id:"search",type:"text",value:ne,onChange:function(e){return Ge(e.target.value)}})}),(0,S.jsx)(O.Z,{md:"4",children:(0,S.jsx)(H.Z,{prepend:{icon:(0,S.jsx)(z.Z,{size:14})},placeholder:Ie.formatMessage({id:"searchByBeneficiary"}),id:"beneficiary",type:"text",value:re,onChange:function(e){return n=e.target.value,u(1),ae(n),w(Me(Me({},y),{},{beneficiary:n})),clearTimeout(Pe),void qe(setTimeout((function(){return Le(1,s,h,Me(Me({},y),{},{beneficiary:n}))}),700));var n}})}),(0,S.jsx)(O.Z,{md:"4",children:(0,S.jsx)(H.Z,{className:"form-control",options:{mode:"range"},type:"flatPicker",prepend:{icon:(0,S.jsx)(E.Z,{size:14})},placeholder:Ie.formatMessage({id:"date"}),id:"from",value:[je,Ze],onChange:function(e){return function(e){u(1);var n=e&&e.length?e[0]:"",t=e&&e.length>1?e[1]:"",i=Me(Me({},y),{},{from:n?b()(n).format("YYYY-MM-DD"):"",to:t?b()(t).format("YYYY-MM-DD"):""});fe(n),ve(t),w(i),clearTimeout(Pe),qe(setTimeout((function(){return Le(1,s,h,i)}),700))}(e)}})})]})})]}),(0,S.jsx)(I.Z,{children:(0,S.jsx)(A.ZP,{noHeader:!0,pagination:!0,subHeader:!0,responsive:!0,paginationServer:!0,columns:C((function(e){(0,F.o)(Ie.formatMessage({id:"delete"}),Ie.formatMessage({id:"deleteSaleQuestion"}),"warning",!0,Ie.formatMessage({id:"yes"}),Ie.formatMessage({id:"no"})).then((function(n){n.value&&(0,Q.k_)(Q.Od,[W.vA,e],!0,B.Am,X,"saleDeletedSuccessfully","somethingWrong",(function(){return Le(o,s,h,y)}),null)}))}),(function(e){V(e),He()}),(function(e){V(e),Ke()}),Ye,Ie),sortIcon:(0,S.jsx)(D.Z,{}),className:"react-dataTable",paginationComponent:function(){return(0,S.jsx)(K.t,{pageIndex:o,pageSize:s,total:g.count,handlePagination:Qe})},data:(Re={name:ne,beneficiary:re},Je=Object.keys(Re).some((function(e){return Re[e].length>0})),(null===(We=g.rows)||void 0===We?void 0:We.length)>0?g.rows:0===(null===(Be=g.rows)||void 0===Be?void 0:Be.length)&&Je?[]:null===(Fe=g.rows)||void 0===Fe?void 0:Fe.slice(0,s)),onSort:function(e,n){var t=[[e.selector,n]];j(t),Le(o,s,t,y)},noDataComponent:(0,S.jsx)("span",{className:"my-3",children:(0,S.jsx)(R.Z,{id:"noRecords"})}),subHeaderComponent:(0,S.jsx)(ze,{ability:Ye,pageIndex:o,onAdd:function(){we(!0)},handlePerPage:function(e){u(1),t(parseInt(e.currentTarget.value)),Le(1,parseInt(e.currentTarget.value),h,y)},rowsPerPage:s,searchTerm:ne,handleFilter:Ge,data:g,intl:Ie})})}),(0,S.jsx)(me,{dispatch:X,setSale:V,toggleSidebar:He,openDetails:Ae,toggleDetails:Ke,onClosed:Ve,refresh:function(){return Le(o,s,h,y)},sale:q}),(0,S.jsx)(ke,{dispatch:X,open:Ce,toggleSidebar:He,onClosed:Ve,refresh:function(){return Le(o,s,h,y)},sale:q})]})})},De=function(){return(0,S.jsx)("div",{className:"app-user-list",children:(0,S.jsx)(Ee,{})})}}}]);