"use strict";(self.webpackChunkfac=self.webpackChunkfac||[]).push([[9976],{43700:function(e,n,t){var r=t(42982),i=t(4942),a=t(45987),s=t(70885),o=t(67294),l=t(39249),c=t(61896),d=t(55654),u=t(39397),f=t(61643),p=t(31109),m=t(70616),x=t(97975),g=t(82669),j=t(67954),y=t(85677),h=t(32701),Z=t(10684),v=t(17834),b=t(97985),O=(t(22299),t(86896)),C=t(44012),N=t(48159),k=t(16550),S=t(88295),E=t(6756),T=t(16714),_=t(56176),w=t(14322),I=t(7966),P=t(28166),A=t(16724),R=t(47201),M=t(85893),D=["data"];function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.refresh,t=e.dispatch,i=e.cat,z=e.onChange,W=e.requireStar,J=e.invalid,U=e.invalidText,V=e.edit,Y=e.add,L=e.label,$=e.disabled,B=(0,o.useState)(!1),G=(0,s.Z)(B,2),Q=G[0],K=G[1],F=(0,o.useState)(null),H=(0,s.Z)(F,2),X=H[0],ee=H[1],ne=(0,o.useState)(!1),te=(0,s.Z)(ne,2),re=te[0],ie=te[1],ae=(0,o.useState)([]),se=(0,s.Z)(ae,2),oe=se[0],le=se[1],ce=(0,o.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],fe=de[1],pe=(0,o.useContext)(E.v),me=(0,o.useState)(null),xe=(0,s.Z)(me,2),ge=xe[0],je=xe[1],ye=(0,o.useState)({}),he=(0,s.Z)(ye,2),Ze=he[0],ve=he[1],be=(0,R.Q)(),Oe=(0,s.Z)(be,1)[0],Ce=(0,O.Z)();function Ne(e){fe(e);var n=e.map((function(e){return{value:e.id,label:e.name,description:e.description}}));V&&ge&&pe.can(_.a.EDIT_ACTION,w.k.INVENTORY_CATEGORY_SUBJECT)&&(n=[{value:"edit-category",label:Ce.formatMessage({id:"editCategory"}),type:"edit-category",color:"flat-warning"}].concat((0,r.Z)(n))),Y&&pe.can(_.a.WRITE_ACTION,w.k.INVENTORY_CATEGORY_SUBJECT)&&(n=[{value:"add-category",label:Ce.formatMessage({id:"addCategory"}),type:"add-category",color:"flat-success"}].concat((0,r.Z)(n))),le(n)}var ke=function(){(0,k.k_)(k.go,[S._C],!0,l.Am,t,"","somethingWrong",Ne,null)},Se=function(){ie(!1),je(null),z(null),ke()};(0,o.useEffect)((function(){je(i)}),[i]),(0,o.useEffect)((function(){n&&ke()}),[n]);var Ee=function(e){414===e.code?ee("nameExist"):ee("somethingWrong")};return(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.Z,{children:[!1!==L&&(0,M.jsxs)(j.Z,{for:"category",children:[(0,M.jsx)(C.Z,{id:"category"})," ",W?(0,M.jsx)("span",{className:"text-danger h6",children:"*"}):""]}),(0,M.jsxs)("div",{style:{border:"".concat(J?"#dc3545":"dark"===Oe?"#404656":"#d8d6de"," solid 1px"),borderRadius:"5px",display:"flex",alignItems:"center"},children:[(0,M.jsx)(u.Z,{className:"mx-1",size:14}),(0,M.jsx)("div",{style:{flexGrow:1,borderLeft:"".concat(J?"#dc3545":"dark"===Oe?"#404656":"#d8d6de"," solid ").concat("ar"===Ce.locale?"0px":"1px"),borderRight:"".concat(J?"#dc3545":"dark"===Oe?"#404656":"#d8d6de"," solid ").concat("ar"===Ce.locale?"1px":"0px")},children:(0,M.jsx)(P.ZP,{isDisabled:$,styles:{control:function(e){return q(q({},e),{},{border:"none"})}},onMenuOpen:function(){return Ne(ue)},id:"category",placeholder:Ce.formatMessage({id:"selectCategory"}),value:ge,components:{Option:function(e){var n=e.data,r=(0,a.Z)(e,D);return"add-category"===n.type?(0,M.jsxs)(x.Z,{className:"text-left rounded-0",color:n.color,block:!0,onClick:function(){return ie(!0)},children:[(0,M.jsx)(c.Z,{size:14})," ",(0,M.jsx)("span",{className:"align-middle ml-50",children:n.label})]}):"edit-category"===n.type?(0,M.jsxs)(x.Z,{className:"text-left rounded-0",color:n.color,block:!0,onClick:function(){var e;(e=oe.find((function(e){return e.value===Number(ge.value)})))&&(0,k.k_)(k.U2,[S.b$,e.value],!0,l.Am,t,"","somethingWrong",(function(e){ve(e),ie(!0)}),null)},children:[(0,M.jsx)(d.Z,{size:14})," ",(0,M.jsx)("span",{className:"align-middle ml-50",children:n.label})]}):(0,M.jsxs)(I.E.Option,q(q({},r),{},{children:[" ",n.label," "]}))}},noOptionsMessage:function(){return(0,M.jsx)(C.Z,{id:"noRecords"})},onChange:function(e){return function(e){je(e),z(e)}(e)},isClearable:!0,theme:A.ss,options:oe,classNamePrefix:"select"})})]}),J&&(0,M.jsx)("div",{className:"customSelectError",children:U})]}),(0,M.jsxs)(y.Z,{isOpen:re,toggle:function(){return ie(!re)},onClosed:function(){K(!1),ie(!1),ve({}),ee("")},className:"modal-dialog-centered",children:[(0,M.jsx)(h.Z,{toggle:function(){return ie(!re)},children:(0,M.jsx)(C.Z,{id:Ze.id?"editCategory":"addCategory"})}),(0,M.jsxs)(Z.Z,{children:[X&&(0,M.jsxs)(v.Z,{color:"danger",className:"d-flex align-items-center",children:[(0,M.jsx)("div",{className:"alert-body font-small-2 flex-grow-1",children:(0,M.jsx)("p",{children:(0,M.jsx)("small",{className:"mr-50",children:(0,M.jsx)(C.Z,{id:X})})})}),(0,M.jsx)(f.Z,{id:"login-tip",className:"mx-50",size:18,style:{top:"10px",right:"10px"}})]}),(0,M.jsx)(N.Z,{label:(0,M.jsx)(C.Z,{id:"name"}),value:Ze.name,id:"name",name:"name",placeholder:"",requireStar:!0,onChange:function(e){return ve(q(q({},Ze),{},{name:e.target.value}))},invalid:Q&&!Ze.name,invalidtext:(0,M.jsx)(C.Z,{id:"required"}),prepend:{icon:(0,M.jsx)(p.Z,{size:14})}}),(0,M.jsx)(N.Z,{label:(0,M.jsx)(C.Z,{id:"description"}),value:Ze.description,id:"description",type:"textarea",name:"description",placeholder:"",onChange:function(e){return ve(q(q({},Ze),{},{description:e.target.value}))},prepend:{icon:(0,M.jsx)(m.Z,{size:14})}})]}),(0,M.jsxs)(b.Z,{children:[(0,M.jsx)(x.Z.Ripple,{onClick:function(e){e.preventDefault(),ee(!1),K(!0),Ze.name&&(Ze.id?(0,k.k_)(k.Vx,[S.b$,Ze.id,Ze],!0,l.Am,t,"categoryUpdatedSuccessfully","",Se,Ee):(0,k.k_)(k.$T,[S.b$,Ze],!0,l.Am,t,"categoryCreatedSuccessfully","",Se,Ee))},color:"primary",children:(0,M.jsx)(C.Z,{id:"save"})}),Ze.id&&pe.can(_.a.DELETE_ACTION,w.k.INVENTORY_CATEGORY_SUBJECT)&&(0,M.jsx)(x.Z.Ripple,{color:"danger",type:"button",onClick:function(){(0,T.o)(Ce.formatMessage({id:"delete"}),Ce.formatMessage({id:"deleteCategoryQuestion"}),"warning",!0,Ce.formatMessage({id:"yes"}),Ce.formatMessage({id:"no"})).then((function(e){e.value&&(0,k.k_)(k.Vx,[S.b$,Ze.id,{deleted:!0}],!0,l.Am,t,"categoryDeletedSuccessfully","somethingWrong",Se,null)}))},children:(0,M.jsx)(C.Z,{id:"delete"})})]})]})]})}},79976:function(e,n,t){var r=t(42982),i=t(4942),a=t(45987),s=t(70885),o=t(67294),l=t(39249),c=t(61896),d=t(55654),u=t(39397),f=t(61643),p=t(31109),m=t(70616),x=t(97975),g=t(17354),j=t(82669),y=t(67954),h=t(85677),Z=t(32701),v=t(10684),b=t(17834),O=t(97985),C=(t(22299),t(86896)),N=t(44012),k=t(48159),S=t(16550),E=t(88295),T=t(6756),_=t(16714),w=t(56176),I=t(14322),P=t(7966),A=t(28166),R=t(16724),M=t(43700),D=t(47201),z=t(85893),q=["data"];function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.refresh,t=e.dispatch,i=e.inv,W=e.onChange,U=e.edit,V=e.add,Y=e.label,L=e.disabled,$=(0,o.useState)(!1),B=(0,s.Z)($,2),G=B[0],Q=B[1],K=(0,o.useState)(null),F=(0,s.Z)(K,2),H=F[0],X=F[1],ee=(0,o.useState)(!1),ne=(0,s.Z)(ee,2),te=ne[0],re=ne[1],ie=(0,o.useState)([]),ae=(0,s.Z)(ie,2),se=ae[0],oe=ae[1],le=(0,o.useState)([]),ce=(0,s.Z)(le,2),de=ce[0],ue=ce[1],fe=(0,o.useContext)(T.v),pe=(0,o.useState)(null),me=(0,s.Z)(pe,2),xe=me[0],ge=me[1],je=(0,o.useState)({}),ye=(0,s.Z)(je,2),he=ye[0],Ze=ye[1],ve=(0,o.useState)(null),be=(0,s.Z)(ve,2),Oe=be[0],Ce=be[1],Ne=(0,o.useState)(0),ke=(0,s.Z)(Ne,2),Se=ke[0],Ee=ke[1],Te=(0,D.Q)(),_e=(0,s.Z)(Te,1)[0],we=(0,C.Z)();function Ie(e){ue(e);var n=e.map((function(e){return{value:e.id,label:e.name,description:e.description,quantity:e.quantity,category:e.category}}));U&&xe&&fe.can(w.a.EDIT_ACTION,I.k.INVENTORY_SUBJECT)&&(n=[{value:"edit-inventory",label:we.formatMessage({id:"editInventory"}),type:"edit-inventory",color:"flat-warning"}].concat((0,r.Z)(n))),V&&fe.can(w.a.WRITE_ACTION,I.k.INVENTORY_SUBJECT)&&(n=[{value:"add-inventory",label:we.formatMessage({id:"addInventory"}),type:"add-inventory",color:"flat-success"}].concat((0,r.Z)(n))),oe(n)}var Pe=function(){(0,S.k_)(S.go,[E.y3],!0,l.Am,t,"","somethingWrong",Ie,null)},Ae=function(){re(!1),ge(null),W(null),Pe()};(0,o.useEffect)((function(){open&&ge(i)}),[i]),(0,o.useEffect)((function(){n&&Pe()}),[n]);var Re=function(e){414===e.code?X("nameExist"):X("somethingWrong")};return(0,z.jsxs)("div",{children:[(0,z.jsxs)(j.Z,{children:[!1!==Y&&(0,z.jsx)(y.Z,{for:"inventory",children:(0,z.jsx)(N.Z,{id:"inventory"})}),(0,z.jsxs)("div",{style:{border:"".concat("dark"===_e?"#404656":"#d8d6de"," solid 1px"),borderRadius:"5px",display:"flex",alignItems:"center"},children:[(0,z.jsx)(u.Z,{className:"mx-1",size:14}),(0,z.jsx)("div",{style:{flexGrow:1,borderLeft:"".concat("dark"===_e?"#404656":"#d8d6de"," solid 1px")},children:(0,z.jsx)(A.ZP,{isDisabled:L,styles:{control:function(e){return J(J({},e),{},{border:"none"})}},onMenuOpen:function(){return Ie(de)},id:"inventory",placeholder:we.formatMessage({id:"selectProduct"}),value:xe,components:{Option:function(e){var n=e.data,r=(0,a.Z)(e,q);return"add-inventory"===n.type?(0,z.jsxs)(x.Z,{className:"text-left rounded-0",color:n.color,block:!0,onClick:function(){return re(!0)},children:[(0,z.jsx)(c.Z,{size:14})," ",(0,z.jsx)("span",{className:"align-middle ml-50",children:n.label})]}):"edit-inventory"===n.type?(0,z.jsxs)(x.Z,{className:"text-left rounded-0",color:n.color,block:!0,onClick:function(){var e;(e=se.find((function(e){return e.value===Number(xe.value)})))&&(0,S.k_)(S.U2,[E.LJ,e.value],!0,l.Am,t,"","somethingWrong",(function(e){Ze(e),re(!0)}),null)},children:[(0,z.jsx)(d.Z,{size:14})," ",(0,z.jsx)("span",{className:"align-middle ml-50",children:n.label})]}):(0,z.jsx)(P.E.Option,J(J({},r),{},{children:(0,z.jsxs)("span",{className:"d-flex align-items-center justify-content-start",children:[n.label,(0,z.jsx)(g.Z,{style:{fontSize:"100%"},pill:!0,color:0===Number(n.quantity)?"light-danger":"light-success",className:"ml-1",children:n.quantity})]})}))}},noOptionsMessage:function(){return(0,z.jsx)(N.Z,{id:"noRecords"})},onChange:function(e){return function(e){ge(e),W(e)}(e)},isClearable:!0,theme:R.ss,options:se,classNamePrefix:"select",onInputChange:function(e){var n;(n=e)&&(clearTimeout(Se),Ee(setTimeout((function(){(0,S.k_)(S.Ki,[E.y3,0,20,[["name","asc"]],{name:n}],!0,l.Am,t,"","somethingWrong",(function(e){return Ie(e)}),null)}),700)))}})})]})]}),(0,z.jsxs)(h.Z,{isOpen:te,toggle:function(){return re(!te)},onClosed:function(){Q(!1),re(!1),Ze({}),X(""),ge(null)},className:"modal-dialog-centered",children:[(0,z.jsx)(Z.Z,{toggle:function(){return re(!te)},children:(0,z.jsx)(N.Z,{id:he.id?"editInventory":"addInventory"})}),(0,z.jsxs)(v.Z,{children:[H&&(0,z.jsxs)(b.Z,{color:"danger",className:"d-flex align-items-center",children:[(0,z.jsx)("div",{className:"alert-body font-small-2 flex-grow-1",children:(0,z.jsx)("p",{children:(0,z.jsx)("small",{className:"mr-50",children:(0,z.jsx)(N.Z,{id:H})})})}),(0,z.jsx)(f.Z,{id:"login-tip",className:"mx-50",size:18,style:{top:"10px",right:"10px"}})]}),(0,z.jsx)(k.Z,{label:(0,z.jsx)(N.Z,{id:"name"}),value:he.name,id:"name",name:"name",placeholder:"",requireStar:!0,onChange:function(e){return Ze(J(J({},he),{},{name:e.target.value}))},invalid:G&&!he.name,invalidtext:(0,z.jsx)(N.Z,{id:"required"}),prepend:{icon:(0,z.jsx)(p.Z,{size:14})}}),(0,z.jsx)(M.Z,{add:!0,edit:!0,refresh:te,cat:Oe,dispatch:t,requireStar:!0,invalid:G&&!Oe,invalidText:(0,z.jsx)(N.Z,{id:"required"}),onChange:function(e){return function(e){Ce(e),Ze(J(J({},he),{},{category:e?e.value:null}))}(e)}}),(0,z.jsx)(k.Z,{label:(0,z.jsx)(N.Z,{id:"description"}),value:he.description,id:"description",type:"textarea",name:"description",placeholder:"",onChange:function(e){return Ze(J(J({},he),{},{description:e.target.value}))},prepend:{icon:(0,z.jsx)(m.Z,{size:14})}})]}),(0,z.jsxs)(O.Z,{children:[(0,z.jsx)(x.Z.Ripple,{onClick:function(e){e.preventDefault(),X(!1),Q(!0),he.name&&(he.id?(0,S.k_)(S.Vx,[E.LJ,he.id,he],!0,l.Am,t,"inventoryUpdatedSuccessfully","",Ae,Re):(0,S.k_)(S.$T,[E.LJ,he],!0,l.Am,t,"inventoryCreatedSuccessfully","",Ae,Re))},color:"primary",children:(0,z.jsx)(N.Z,{id:"save"})}),he.id&&(0,z.jsx)(x.Z.Ripple,{color:"danger",type:"button",onClick:function(){(0,_.o)(we.formatMessage({id:"delete"}),we.formatMessage({id:"deleteInventoryQuestion"}),"warning",!0,we.formatMessage({id:"yes"}),we.formatMessage({id:"no"})).then((function(e){e.value&&(0,S.k_)(S.Vx,[E.LJ,he.id,{deleted:!0}],!0,l.Am,t,"inventoryDeletedSuccessfully","somethingWrong",Ae,null)}))},children:(0,z.jsx)(N.Z,{id:"delete"})})]})]})]})}}}]);