"use strict";(self.webpackChunkfac=self.webpackChunkfac||[]).push([[5840],{78133:function(e,n,t){var s=t(4942),r=t(45987),a=t(78268),i=t(45697),l=t.n(i),c=t(94184),o=t.n(c),d=t(85677),u=t(32701),m=t(10684),p=t(85893),f=["onOpened","onClosed","width","open","toggleSidebar","size","bodyClassName","contentClassName","wrapperClassName","headerClassName","className","title","children","closeBtn"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e){var n,t=e.onOpened,i=e.onClosed,l=e.width,c=e.open,g=e.toggleSidebar,j=e.size,h=e.bodyClassName,b=e.contentClassName,Z=e.wrapperClassName,v=e.headerClassName,N=e.className,y=e.title,O=e.children,w=e.closeBtn,C=(0,r.Z)(e,f),S=w||(0,p.jsx)(a.Z,{className:"cursor-pointer",size:15,onClick:g});return(0,p.jsxs)(d.Z,x(x(x(x(x({},t?{onOpened:t}:{}),i?{onClosed:i}:{}),{},{isOpen:c,toggle:g,contentClassName:o()((0,s.Z)({},b,b)),modalClassName:o()("modal-slide-in",(0,s.Z)({},Z,Z)),className:o()((n={},(0,s.Z)(n,N,N),(0,s.Z)(n,"sidebar-lg","lg"===j),(0,s.Z)(n,"sidebar-sm","sm"===j),n))},void 0!==l?{style:{width:String(l)+"px"}}:{}),C),{},{children:[(0,p.jsx)(u.Z,{className:o()((0,s.Z)({},v,v)),toggle:g,close:S,tag:"div",children:(0,p.jsx)("h5",{className:"modal-title",children:(0,p.jsx)("span",{className:"align-middle",children:y})})}),(0,p.jsx)(m.Z,{className:o()("flex-grow-1",(0,s.Z)({},h,h)),children:O})]}))};n.Z=j,j.propTypes={title:l().string.isRequired,open:l().bool.isRequired,toggleSidebar:l().func.isRequired,size:l().oneOf(["sm","lg"]),className:l().string,bodyClassName:l().string,contentClassName:l().string,wrapperClassName:l().string,children:l().any.isRequired,width:l().oneOfType([l().number,l().string])}},65840:function(e,n,t){t.r(n),t.d(n,{default:function(){return me}}),t(61360);var s=t(4942),r=t(15861),a=t(70885),i=t(87757),l=t.n(i),c=t(67294),o=t(84751),d=t(61896),u=t(73752),m=t(90044),p=t(10267),f=t(51252),g=t(67954),x=t(68959),j=t(97975),h=t(56941),b=t(38089),Z=t(75351),v=t(91121),N=(t(22299),t(73732),t(39249)),y=t(44012),O=t(86896),w=t(48159),C=t(88295),S=t(5513),P=t(68138),k=t(83823),M=t(65497),E=t(42365),T=t(98227),D=t(79366),z=t(55654),R=t(30833),I=t(56176),_=t(14322),A=t(85893),G=function(e,n,t,s){return[{name:n.formatMessage({id:"name"}),minWidth:"297px",selector:"name",sortable:!1,cell:function(e){return(0,A.jsxs)("div",{className:"d-flex justify-content-left align-items-center",children:[e.avatar?(0,A.jsx)(P.Z,{img:e.avatar,className:"mr-1"}):(0,A.jsx)(P.Z,{color:"light-danger",className:"mr-1",content:e.name,initials:!0}),(0,A.jsx)("div",{className:"d-flex flex-column",children:(0,A.jsx)(S.rU,{to:"#",onClick:function(){return t(e.id)},className:"user-name text-truncate mb-0",children:(0,A.jsx)("span",{className:"font-weight-bold text-capitalize",children:e.name})})})]})}},{name:n.formatMessage({id:"members"}),selector:"members",sortable:!1,cell:function(e){return"".concat(e.members||0," ").concat(n.formatMessage({id:"members"}))}},{name:n.formatMessage({id:"description"}),selector:"description",sortable:!1,cell:function(e){return e.description}},{name:n.formatMessage({id:"actions"}),minWidth:"100px",cell:function(r){return(0,A.jsxs)(k.Z,{children:[(0,A.jsx)(M.Z,{tag:"div",className:"btn btn-sm",children:(0,A.jsx)(D.Z,{size:14,className:"cursor-pointer"})}),(0,A.jsxs)(E.Z,{right:!0,children:[s.can(I.a.EDIT_ACTION,_.k.GROUP_SUBJECT)&&(0,A.jsxs)(T.Z,{onClick:function(){return t(r.id)},className:"w-100",children:[(0,A.jsx)(z.Z,{size:14,className:"mr-50"}),(0,A.jsx)("span",{className:"align-middle",children:n.formatMessage({id:"edit"})})]}),s.can(I.a.DELETE_ACTION,_.k.GROUP_SUBJECT)&&(0,A.jsxs)(T.Z,{className:"w-100",onClick:function(){return e(r.id)},children:[(0,A.jsx)(R.Z,{size:14,className:"mr-50"}),(0,A.jsx)("span",{className:"align-middle",children:n.formatMessage({id:"delete"})})]})]})]})}}]},U=t(45987),W=t(78133),q=t(15538),B=t(17834),F=t(82669),H=t(61643),J=t(70616),K=t(39646),L=t(16550),Q=t(28166),V=t(7966),$=t(76930),X=t(16724),Y=["data"];function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te=function(e){var n=e.open,t=e.toggleSidebar,s=e.refresh,r=e.groupId,i=(0,c.useState)(""),l=(0,a.Z)(i,2),d=l[0],m=l[1],p=(0,c.useState)(""),f=(0,a.Z)(p,2),x=f[0],h=f[1],b=(0,c.useState)(!1),Z=(0,a.Z)(b,2),v=Z[0],S=Z[1],k=(0,c.useState)([]),M=(0,a.Z)(k,2),E=M[0],T=M[1],D=(0,c.useState)([]),z=(0,a.Z)(D,2),R=z[0],I=z[1],_=(0,c.useState)(0),G=(0,a.Z)(_,2),ee=G[0],te=G[1],se=(0,c.useState)(""),re=(0,a.Z)(se,2),ae=re[0],ie=re[1],le=(0,o.I0)(),ce=!d,oe=function(e,n){e&&t(),ie(""),I([]),h(""),T([]),S(!1),m(""),n&&s()},de=function(){oe(!0,!0)};(0,c.useEffect)((function(){!n&&r?(0,L.k_)(L.U2,[C.c8,r],!0,N.Am,le,"","somethingWrong",(function(e){return function(e){m(e.group.name),T(e.members),h(e.group.description),T((e.members||[]).map((function(e){return{value:e.id,label:e.name,avatar:e.avatar,email:e.email}}))),t()}(e)}),null):oe(!1,!1)}),[r]);var ue=function(e){414===e.code?ie("nameExist"):415===e.code?ie("groupEmptyError"):ie("somethingWrong")};return(0,A.jsx)(W.Z,{size:"lg",open:n,onClosed:function(){return oe(!1,!1)},title:(0,O.Z)().formatMessage({id:r?"editGroup":"newGroup"}),headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:t,children:(0,A.jsx)(c.Fragment,{children:(0,A.jsxs)(q.Z,{className:"mt-2",onSubmit:r?function(e){e.preventDefault(),ie(""),S(!0),ce||(0,L.k_)(L.Vx,[C.c8,r,{name:d,members:E,description:x}],!0,N.Am,le,"groupUpdatedSuccessfully","",de,ue)}:function(e){e.preventDefault(),ie(""),S(!0),ce||(0,L.k_)(L.$T,[C.c8,{name:d,members:E,description:x}],!0,N.Am,le,"groupCreatedSuccessfully","",de,ue)},children:[ae&&(0,A.jsxs)(B.Z,{color:"danger",className:"d-flex align-items-center",children:[(0,A.jsx)("div",{className:"alert-body font-small-2 flex-grow-1",children:(0,A.jsx)("p",{children:(0,A.jsx)("small",{className:"mr-50",children:(0,A.jsx)(y.Z,{id:ae})})})}),(0,A.jsx)(H.Z,{id:"login-tip",className:"mx-50",size:18,style:{top:"10px",right:"10px"}})]}),(0,A.jsx)(w.Z,{label:(0,A.jsx)(y.Z,{id:"name"}),value:d,id:"name",name:"name",placeholder:"",onChange:function(e){return m(e.target.value)},invalid:v&&!d,requireStar:!0,invalidtext:(0,A.jsx)(y.Z,{id:"required"}),prepend:{icon:(0,A.jsx)(u.Z,{size:14})}}),(0,A.jsx)(w.Z,{label:(0,A.jsx)(y.Z,{id:"description"}),value:x,id:"description",name:"description",type:"textarea",placeholder:"",onChange:function(e){return h(e.target.value)},prepend:{icon:(0,A.jsx)(J.Z,{size:14})}}),(0,A.jsxs)(F.Z,{children:[(0,A.jsx)(g.Z,{for:"members",children:(0,A.jsx)(y.Z,{id:"members"})}),(0,A.jsxs)("div",{style:{border:"#d8d6de solid 1px",borderRadius:"5px",display:"flex",alignItems:"center"},children:[(0,A.jsx)(K.Z,{className:"mx-1",size:14}),(0,A.jsx)("div",{style:{flexGrow:1,borderLeft:"#d8d6de solid 1px"},children:(0,A.jsx)(Q.ZP,{styles:{control:function(e){return ne(ne({},e),{},{border:"none"})}},id:"members",placeholder:(0,O.Z)().formatMessage({id:"select"}),value:E,noOptionsMessage:function(){return(0,A.jsx)(y.Z,{id:"noRecords"})},onChange:function(e){return T(e)},isMulti:!0,isClearable:!1,theme:X.ss,options:R,classNamePrefix:"select",components:{Option:function(e){var n=e.data,t=(0,U.Z)(e,Y);return(0,A.jsx)(V.E.Option,ne(ne({},t),{},{children:(0,A.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,A.jsx)(P.Z,{className:"my-0 mr-50",size:"sm",img:n.avatar||$}),(0,A.jsxs)("div",{className:"d-flex  flex-column justify-content-start",children:[(0,A.jsx)("strong",{children:n.label}),(0,A.jsxs)("small",{className:"text-truncate text-dark mb-0",children:["@",n.email]})]})]})}))}},onInputChange:function(e){var n;(n=e)&&(clearTimeout(ee),te(setTimeout((function(){return(0,L.k_)(L.Ki,[C.Gm,0,20,[["name","asc"]],{name:n}],!0,N.Am,le,"","somethingWrong",(function(e){return function(e){e&&e.rows&&I(e.rows.map((function(e){return{value:e.id,label:e.name,avatar:e.avatar,email:e.email}})))}(e)}),null)}),700)))}})})]})]}),(0,A.jsx)(j.Z.Ripple,{type:"submit",className:"mr-1",color:"primary",children:(0,A.jsx)(y.Z,{id:"save"})}),(0,A.jsx)(j.Z.Ripple,{color:"secondary",outline:!0,onClick:function(){return oe(!0,!1)},children:(0,A.jsx)(y.Z,{id:"cancel"})})]})})})},se=t(4248),re=t(16714),ae=t(82433),ie=t(6756),le=t(82475);function ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=function(e){var n=e.toggleSidebar,t=e.handlePerPage,s=e.rowsPerPage,r=e.pageIndex,a=e.data,i=e.intl,l=e.ability;return(0,A.jsx)("div",{className:"list-table-header w-100 mr-1 ml-50 mt-2 mb-75",children:(0,A.jsxs)(p.Z,{children:[(0,A.jsx)(f.Z,{xl:"6",className:"d-flex align-items-center p-0",children:(0,A.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,A.jsx)(g.Z,{for:"rows-per-page",children:(0,A.jsx)(y.Z,{id:"rowsPerPage"})}),(0,A.jsx)(x.Z,{className:"form-control mx-50",type:"select",value:s,onChange:t,style:{width:"4rem",padding:"0 0.8rem",backgroundPosition:"calc(100% - 3px) 7px, calc(100% - 20px) 13px, 100% 0"},bsSize:"sm",children:ae.m.map((function(e,n){return(0,A.jsx)("option",{value:e,children:e},n)}))}),(0,A.jsxs)(g.Z,{for:"rows-per-page",children:[a.count?(0,A.jsxs)(A.Fragment,{children:[(r-1)*s+1,"-",r*s>a.count?a.count:r*s," ",i.formatMessage({id:"of"})," ",a.count]}):null," "]})]})}),(0,A.jsxs)(f.Z,{xl:"6",className:"d-flex align-items-sm-center justify-content-lg-end justify-content-start flex-lg-nowrap flex-wrap flex-sm-row flex-column pr-lg-1 p-0 mt-lg-0 mt-1",children:[(0,A.jsx)("div",{className:"mr-1",children:(0,A.jsx)(le._,{data:a,title:"group",keys:["name"]})}),l.can(I.a.WRITE_ACTION,_.k.GROUP_SUBJECT)&&(0,A.jsxs)(j.Z.Ripple,{color:"primary",onClick:n,children:[(0,A.jsx)(d.Z,{size:15}),(0,A.jsx)("span",{className:"align-middle ml-25",children:(0,A.jsx)(y.Z,{id:"addGroup"})})]})]})]})})},ue=function(){var e=(0,c.useState)(ae.m[0]),n=(0,a.Z)(e,2),t=n[0],s=n[1],i=(0,c.useState)(1),d=(0,a.Z)(i,2),g=d[0],x=d[1],j=(0,c.useState)([["createdAt","DESC"]]),S=(0,a.Z)(j,2),P=S[0],k=(S[1],(0,c.useState)({count:0,rows:[]})),M=(0,a.Z)(k,2),E=M[0],T=M[1],D=(0,c.useState)({}),z=(0,a.Z)(D,2),R=z[0],I=z[1],_=(0,o.I0)(),U=(0,c.useState)(""),W=(0,a.Z)(U,2),q=W[0],B=W[1],F=(0,c.useState)(!1),H=(0,a.Z)(F,2),J=H[0],K=H[1],Q=(0,c.useState)(""),V=(0,a.Z)(Q,2),$=V[0],X=(V[1],(0,c.useState)("")),Y=(0,a.Z)(X,2),ee=(Y[0],Y[1],(0,c.useState)(0)),ne=(0,a.Z)(ee,2),le=ne[0],ce=ne[1],ue=(0,c.useState)(null),me=(0,a.Z)(ue,2),pe=me[0],fe=me[1],ge=(0,O.Z)(),xe=(0,c.useContext)(ie.v),je=function(e,n,t,s){(0,L.k_)(L.Ki,[C.qM,e,n,t,s],!0,N.Am,_,null,"somethingWrong",(function(e){return T({rows:e,count:e&&e.length?e[0].count:0})}),null)};(0,c.useEffect)((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je(g,t,P,R);case 1:case"end":return e.stop()}}),e)}))),[]);var he,be,Ze,ve,Ne,ye=function(){J&&fe(null),K(!J)},Oe=function(e){x(e.selected+1),je(e.selected+1,t,P,R)},we=function(e){x(1),B(e),I(oe(oe({},R),{},{name:e})),clearTimeout(le),ce(setTimeout((function(){return je(1,t,P,oe(oe({},R),{},{name:e}))}),700))};return(0,A.jsx)("div",{className:"app-user-list",children:(0,A.jsxs)(c.Fragment,{children:[(0,A.jsxs)(h.Z,{children:[(0,A.jsx)(b.Z,{children:(0,A.jsx)(Z.Z,{tag:"h4",children:(0,A.jsx)(y.Z,{id:"searchFilter"})})}),(0,A.jsx)(v.Z,{children:(0,A.jsx)(p.Z,{children:(0,A.jsx)(f.Z,{md:"4",children:(0,A.jsx)(w.Z,{prepend:{icon:(0,A.jsx)(u.Z,{size:14})},placeholder:ge.formatMessage({id:"searchByName"}),id:"search",type:"text",value:q,onChange:function(e){return we(e.target.value)}})})})})]}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(m.ZP,{noHeader:!0,pagination:!0,subHeader:!0,responsive:!0,paginationServer:!0,sortServer:!1,columns:G((function(e){(0,re.o)(ge.formatMessage({id:"delete"}),ge.formatMessage({id:"deleteGroupQuestion"}),"warning",!0,ge.formatMessage({id:"yes"}),ge.formatMessage({id:"no"})).then((function(n){n.value&&(0,L.k_)(L.Od,[C.c8,e],!0,N.Am,_,"groupDeletedSuccessfully","somethingWrong",(function(){return je(g,t,P,R)}),null)}))}),ge,(function(e){fe(e)}),xe),className:"react-dataTable",paginationComponent:function(){return(0,A.jsx)(se.t,{pageIndex:g,pageSize:t,total:E.count,handlePagination:Oe})},data:(ve={name:q,role:$},Ne=Object.keys(ve).some((function(e){return ve[e].length>0})),(null===(he=E.rows)||void 0===he?void 0:he.length)>0?E.rows:0===(null===(be=E.rows)||void 0===be?void 0:be.length)&&Ne?[]:null===(Ze=E.rows)||void 0===Ze?void 0:Ze.slice(0,t)),noDataComponent:(0,A.jsx)("span",{className:"my-3",children:(0,A.jsx)(y.Z,{id:"noRecords"})}),subHeaderComponent:(0,A.jsx)(de,{ability:xe,pageIndex:g,toggleSidebar:ye,handlePerPage:function(e){x(1),s(parseInt(e.currentTarget.value)),je(1,parseInt(e.currentTarget.value),P,R)},rowsPerPage:t,searchTerm:q,handleFilter:we,data:E,intl:ge})})}),(0,A.jsx)(te,{open:J,groupId:pe,toggleSidebar:ye,refresh:function(){return je(g,t,P,R)}})]})})},me=function(){return(0,A.jsx)("div",{className:"app-user-list",children:(0,A.jsx)(ue,{})})}},91121:function(e,n,t){var s=t(87462),r=t(63366),a=t(67294),i=t(45697),l=t.n(i),c=t(94184),o=t.n(c),d=t(23663),u=["className","cssModule","innerRef","tag"],m={tag:d.iC,className:l().string,cssModule:l().object,innerRef:l().oneOfType([l().object,l().string,l().func])},p=function(e){var n=e.className,t=e.cssModule,i=e.innerRef,l=e.tag,c=(0,r.Z)(e,u),m=(0,d.mx)(o()(n,"card-body"),t);return a.createElement(l,(0,s.Z)({},c,{className:m,ref:i}))};p.propTypes=m,p.defaultProps={tag:"div"},n.Z=p},38089:function(e,n,t){var s=t(87462),r=t(63366),a=t(67294),i=t(45697),l=t.n(i),c=t(94184),o=t.n(c),d=t(23663),u=["className","cssModule","tag"],m={tag:d.iC,className:l().string,cssModule:l().object},p=function(e){var n=e.className,t=e.cssModule,i=e.tag,l=(0,r.Z)(e,u),c=(0,d.mx)(o()(n,"card-header"),t);return a.createElement(i,(0,s.Z)({},l,{className:c}))};p.propTypes=m,p.defaultProps={tag:"div"},n.Z=p},75351:function(e,n,t){var s=t(87462),r=t(63366),a=t(67294),i=t(45697),l=t.n(i),c=t(94184),o=t.n(c),d=t(23663),u=["className","cssModule","tag"],m={tag:d.iC,className:l().string,cssModule:l().object},p=function(e){var n=e.className,t=e.cssModule,i=e.tag,l=(0,r.Z)(e,u),c=(0,d.mx)(o()(n,"card-title"),t);return a.createElement(i,(0,s.Z)({},l,{className:c}))};p.propTypes=m,p.defaultProps={tag:"div"},n.Z=p}}]);